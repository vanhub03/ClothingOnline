@model ClothingOnlineWeb.Models.Order
@using Microsoft.AspNetCore.Http
@using Newtonsoft.Json
@inject IHttpContextAccessor HttpContextAccessor
@{
    var session = HttpContextAccessor.HttpContext.Session;
    string jsoncart = session.GetString(ClothingOnlineWeb.Controllers.ProductController.CARTKEY);
    string jsonacc = session.GetString("accountSession");
    double total = 0;
    if (jsoncart != null)
    {
        var cart = JsonConvert.DeserializeObject<List<Cart>>(jsoncart);
        var account = JsonConvert.DeserializeObject<Account>(jsonacc);
        foreach (var item in cart)
        {
            double price = item.quantity * item.product.Price;
            total += price;
        }
        <form asp-controller="Order" asp-action="AddToOrderWithAccountInfor">
            <label>Tên người nhận: </label>
            <input asp-for="Customername" class="form-control" value="@account.Username" disabled />
            <label>Số điện thoại: </label>
            <input asp-for="Phone" class="form-control" value="@account.Phone" disabled />
            <label>Địa chỉ: </label>
            <input asp-for="Address" class="form-control" value="@account.Address" disabled />
            <label>Tổng số tiền phải thanh toán: </label>
            <input asp-for="Totalprice" class="form-control" value="@total" disabled />
            <input type="submit" class="btn btn-success" value="Order" />
        </form>
    }
    else
    {
        <h1>Bạn chưa có sản phẩm nào trong giỏ hàng</h1>
    }
}